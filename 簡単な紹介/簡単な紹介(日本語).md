# Redis 入門ノート

## Redis 概要
Redisは**キーバリュー型**の**NoSQL**データベースで、以下の特徴があります：
- **キーバリュー型**：データはKey-Value形式で保存され、Valueは複数の形式（文字列、数値、Jsonなど）をサポート
- **NoSQL**：従来のリレーショナルデータベースとは大きく異なる

## NoSQLの理解
NoSQL（Not Only SQL/非SQL）は非リレーショナルデータベースの総称です。

### 構造化 vs 非構造化
| タイプ       | 特徴                                                                 |
|--------------|----------------------------------------------------------------------|
| リレーショナルDB | 厳格な構造制約（フィールド名、データ型、フィールド制約など）         |
| NoSQL        | 固定形式なし、キーバリュー型、ドキュメント型、グラフ型など多様な形式をサポート |

### 関連性 vs 非関連性
| タイプ       | 特徴                                                                 |
|--------------|----------------------------------------------------------------------|
| リレーショナルDB | テーブル間に関連性が存在（外部キー制約など）                         |
| NoSQL        | 関連性なし、ビジネスロジックやデータ結合で関係を維持                 |

**ドキュメント構造の例**：
```json
{
  "id": 1,
  "name": "张三",
  "orders": [
    {
      "id": 1,
      "item": {
        "id": 10, 
        "title": "Honor 6", 
        "price": 4999
      }
    },
    {
      "id": 2,
      "item": {
        "id": 20, 
        "title": "Xiaomi 11", 
        "price": 3999
      }
    }
  ]
}
```
## クエリ方法の比較

```sql
-- SQL
SELECT id, age FROM tb_user WHERE id = 1
```
```
get user:1
```
```
// MongoDB
db.user.find({_id: 1})
```
```
GET http://localhost:9200/users/1
```

## トランザクション特性の比較

| タイプ           | トランザクションサポート                                                                 |
|------------------|----------------------------------------------------------------------------------------|
| リレーショナルDB | **ACID特性**を完全サポート：<br>・原子性 (Atomicity)<br>・一貫性 (Consistency)<br>・分離性 (Isolation)<br>・耐久性 (Durability) |
| NoSQLデータベース | **BASEモデル**を採用：<br>・基本的可用性 (Basically Available)<br>・軟状態 (Soft state)<br>・結果的整合性 (Eventually consistent)<br><br>※一部製品は限定的なトランザクションをサポート |

### 補足説明
- **ACID**：データベーストランザクションの信頼性を保証する4つの特性
- **BASE**：高可用性とスケーラビリティを重視したアプローチ
- 主要NoSQL製品のトランザクションサポート状況：
  - MongoDB：4.0以降でマルチドキュメントトランザクションをサポート
  - Redis：単一コマンドは原子性を保証、Luaスクリプトで複数操作をまとめて実行可能
  - Cassandra：軽量トランザクションを提供
